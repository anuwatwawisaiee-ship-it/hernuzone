<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>เฮียนุโซน - ร้านไก่ตัน Blox Fruits</title>
<style>
  /* Reset & Base */
  * {
    margin: 0; padding: 0; box-sizing: border-box;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  }
  body {
    background-color: #121212;
    color: #fff;
    line-height: 1.6;
  }
  a {
    color: #ff3b3b;
    text-decoration: none;
  }
  a:hover {
    text-decoration: underline;
  }
  header {
    background-color: #000;
    padding: 20px 40px;
    position: fixed;
    width: 100%;
    top: 0;
    z-index: 999;
    box-shadow: 0 2px 10px rgba(255, 59, 59, 0.5);
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  header .logo {
    font-size: 24px;
    font-weight: 900;
    color: #ff3b3b;
    letter-spacing: 2px;
  }
  nav a {
    margin-left: 25px;
    font-weight: 600;
    font-size: 16px;
  }
  nav a:hover {
    color: #ff6060;
  }
  section {
    padding: 100px 40px 60px;
    max-width: 1000px;
    margin: 0 auto;
  }
  .banner {
    background: url('https://i.imgur.com/1sBG4MO.jpg') center/cover no-repeat;
    height: 300px;
    border-radius: 8px;
    margin-bottom: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    text-shadow: 0 0 10px #ff3b3b;
  }
  .banner h1 {
    font-size: 48px;
    font-weight: 900;
    color: #ff3b3b;
  }
  h2 {
    margin-bottom: 20px;
    color: #ff3b3b;
    font-weight: 900;
    border-bottom: 2px solid #ff3b3b;
    display: inline-block;
    padding-bottom: 8px;
  }
  /* Products */
  .products {
    display: grid;
    grid-template-columns: repeat(auto-fit,minmax(280px,1fr));
    gap: 20px;
  }
  .product-card {
    background-color: #1c1c1c;
    border-radius: 10px;
    padding: 20px;
    box-shadow: 0 0 15px #ff3b3b44;
    transition: transform 0.3s ease;
  }
  .product-card:hover {
    transform: scale(1.05);
    box-shadow: 0 0 25px #ff3b3baa;
  }
  .product-card h3 {
    color: #ff3b3b;
    margin-bottom: 10px;
  }
  .product-card p {
    font-size: 16px;
    margin-bottom: 12px;
  }
  .btn-order {
    background-color: #ff3b3b;
    border: none;
    padding: 10px 20px;
    color: #fff;
    font-weight: 700;
    border-radius: 30px;
    cursor: pointer;
    transition: background-color 0.3s ease;
    display: inline-block;
  }
  .btn-order:hover {
    background-color: #ff0000;
  }
  /* Order Form */
  form {
    background-color: #1c1c1c;
    padding: 30px;
    border-radius: 10px;
    box-shadow: 0 0 15px #ff3b3b44;
    max-width: 600px;
    margin: 0 auto;
  }
  form label {
    display: block;
    margin-bottom: 6px;
    font-weight: 600;
    color: #ff3b3b;
  }
  form input, form textarea, form select {
    width: 100%;
    padding: 10px;
    margin-bottom: 18px;
    border: none;
    border-radius: 6px;
    background-color: #333;
    color: #fff;
    font-size: 15px;
    resize: vertical;
  }
  form input::placeholder, form textarea::placeholder {
    color: #bbb;
  }
  form button {
    background-color: #ff3b3b;
    border: none;
    padding: 12px 25px;
    font-weight: 700;
    color: #fff;
    border-radius: 30px;
    cursor: pointer;
    font-size: 16px;
    transition: background-color 0.3s ease;
  }
  form button:hover {
    background-color: #e00000;
  }
  /* Contact */
  .contact-info {
    max-width: 600px;
    margin: 0 auto;
    text-align: center;
  }
  .contact-info p {
    font-size: 18px;
    margin-bottom: 10px;
  }
  .contact-info a {
    font-weight: 700;
    color: #ff3b3b;
  }
  /* Footer */
  footer {
    text-align: center;
    padding: 20px;
    background-color: #000;
    color: #666;
    font-size: 14px;
    margin-top: 60px;
  }
  /* Responsive */
  @media (max-width: 600px) {
    section {
      padding: 80px 20px 40px;
    }
    header {
      padding: 15px 20px;
    }
    .banner h1 {
      font-size: 32px;
    }
    nav a {
      margin-left: 15px;
      font-size: 14px;
    }
  }

  /* uploaded image preview */
  #uploadedImagePreview img {
    max-width: 100%;
    border-radius: 8px;
    margin-top: 15px;
  }
</style>
</head>
<body>

<header>
  <div class="logo">เฮียนุโซน</div>
  <nav id="navMenu">
    <!-- เมนูจะแสดงผ่าน JS -->
  </nav>
</header>

<!-- ส่วนเข้าสู่ระบบ/สมัครสมาชิก -->
<section id="authSection" style="display:none; padding-top:140px; max-width:400px; margin:0 auto;">
  <h2 id="authTitle" style="text-align:center; margin-bottom:20px;">เข้าสู่ระบบ</h2>
  <div id="message" style="color:#ff3b3b; text-align:center; margin-bottom:15px;"></div>

  <form id="loginForm">
    <label for="loginUsername">ชื่อผู้ใช้</label>
    <input type="text" id="loginUsername" placeholder="กรอกชื่อผู้ใช้" required>
    <label for="loginPassword">รหัสผ่าน</label>
    <input type="password" id="loginPassword" placeholder="กรอกรหัสผ่าน" required>
    <button type="submit">เข้าสู่ระบบ</button>
  </form>

  <form id="registerForm" style="display:none;">
    <label for="regUsername">ชื่อผู้ใช้</label>
    <input type="text" id="regUsername" placeholder="กรอกชื่อผู้ใช้" required>
    <label for="regPassword">รหัสผ่าน</label>
    <input type="password" id="regPassword" placeholder="กรอกรหัสผ่าน" required>
    <label for="regPasswordConfirm">ยืนยันรหัสผ่าน</label>
    <input type="password" id="regPasswordConfirm" placeholder="ยืนยันรหัสผ่าน" required>
    <button type="submit">สมัครสมาชิก</button>
  </form>

  <p style="text-align:center; margin-top:10px;">
    <button id="showRegisterBtn" style="background:none; border:none; color:#ff3b3b; cursor:pointer;">สมัครสมาชิก</button> |
    <button id="showLoginBtn" style="background:none; border:none; color:#ff3b3b; cursor:pointer; display:none;">เข้าสู่ระบบ</button>
  </p>
</section>

<!-- ส่วนเนื้อหาหลัก -->
<div id="mainContent" style="display:none; padding-top:100px;">

  <section id="home" class="banner">
    <h1>ร้านไก่ตัน Blox Fruits</h1>
  </section>

  <section id="products">
    <h2>สินค้าไก่ตัน</h2>
    <div class="products">
      <div class="product-card">
        <h3>ไก่ตัน Blox Fruits</h3>
        <p>ราคา: 35 บาท/ตัว</p>
        <p>ฟาร์มง่าย ขายไว กำไรดี</p>
        <button class="btn-order" id="orderBtn">สั่งซื้อเลย</button>
      </div>
    </div>
  </section>

  <section id="order" style="display:none;">
    <h2>สั่งซื้อไก่ตัน</h2>
    <form id="orderForm">
      <label for="name">ชื่อผู้สั่ง</label>
      <input type="text" id="name" name="name" placeholder="กรอกชื่อของคุณ" readonly required>

      <label for="gameID">ไอดีเกม</label>
      <input type="text" id="gameID" name="gameID" placeholder="กรอกไอดีเกม" required>

      <label for="quantity">จำนวนไก่ตันที่ต้องการ</label>
      <input type="number" id="quantity" name="quantity" placeholder="เช่น 10" min="1" required>

      <label for="contact">ช่องทางติดต่อ (Line ID หรือ เบอร์โทร)</label>
      <input type="text" id="contact" name="contact" placeholder="เช่น Line ID หรือ เบอร์โทร" required>

      <button type="submit">ส่งคำสั่งซื้อ</button>
    </form>
  </section>

  <section id="ordersSection" style="display:none;">
    <h2>คำสั่งซื้อของคุณ</h2>
    <div id="ordersList" style="background-color:#1c1c1c; padding:15px; border-radius:8px; max-width:600px; margin:0 auto; color:#fff;">
      ยังไม่มีคำสั่งซื้อ
    </div>
  </section>

  <section id="adminSection" style="display:none; padding-top:20px; max-width:600px; margin:0 auto;">

    <h2>แอดมิน</h2>

    <div style="margin-bottom:20px;">
      <label for="userCountInput">จำนวนผู้ใช้ทั้งหมด:</label>
      <input type="number" id="userCountInput" min="0" style="width:80px; background:#333; color:#fff; border:none; border-radius:4px; text-align:center;">
      <button id="updateUserCountBtn" class="btn-order" style="margin-left:10px;">อัพเดต</button>
      <p id="userCountMsg" style="color:#ff3b3b; margin-top:10px;"></p>
    </div>

    <div>
      <label for="uploadImageInput">เพิ่มรูป (เฉพาะแอดมิน)</label><br>
      <input type="file" id="uploadImageInput" accept="image/*">
      <div id="uploadedImagePreview"></div>
    </div>

  </section>

  <section id="contact" style="margin-top:40px;">
    <h2>รับไอดี</h2>
    <div class="contact-info">
      <p>Facebook Page: <a href="https://www.facebook.com/anuwat.wawisai.2025?mibextid=ZbWKwL" target="_blank">Anuwat Wawisai</a></p>
      <p>เบอร์โทร: 0802215880</p>
    </div>
  </section>

</div>

<footer>
  &copy; 2025 เฮียนุโซน - ร้านไก่ตัน Blox Fruits
</footer>

<script>
  // ตัวแปรสำคัญ
  const ADMIN_USERNAME = 'Admin';
  const ADMIN_PASSWORD = '112233';

  // Elements
  const authSection = document.getElementById('authSection');
  const mainContent = document.getElementById('mainContent');
  const navMenu = document.getElementById('navMenu');

  const loginForm = document.getElementById('loginForm');
  const registerForm = document.getElementById('registerForm');
  const showRegisterBtn = document.getElementById('showRegisterBtn');
  const showLoginBtn = document.getElementById('showLoginBtn');
  const authTitle = document.getElementById('authTitle');
  const messageBox = document.getElementById('message');

  const orderBtn = document.getElementById('orderBtn');
  const orderSection = document.getElementById('order');
  const orderForm = document.getElementById('orderForm');
  const nameInput = document.getElementById('name');

  const ordersSection = document.getElementById('ordersSection');
  const ordersList = document.getElementById('ordersList');

  const adminSection = document.getElementById('adminSection');
  const userCountInput = document.getElementById('userCountInput');
  const updateUserCountBtn = document.getElementById('updateUserCountBtn');
  const userCountMsg = document.getElementById('userCountMsg');

  const uploadImageInput = document.getElementById('uploadImageInput');
  const uploadedImagePreview = document.getElementById('uploadedImagePreview');

  // ฟังก์ชันเช็คล็อกอิน
  function getLoggedInUser() {
    return JSON.parse(localStorage.getItem('loggedInUser'));
  }

  // แสดงเมนูตามสถานะ
  function renderNavMenu() {
    const user = getLoggedInUser();
    navMenu.innerHTML = '';

    if (!user) {
      // ถ้ายังไม่ล็อกอิน
      navMenu.innerHTML = `
        <a href="#" id="loginMenuBtn">เข้าสู่ระบบ</a>
        <a href="#" id="registerMenuBtn">สมัครสมาชิก</a>
      `;
      document.getElementById('loginMenuBtn').addEventListener('click', () => {
        showLogin();
      });
      document.getElementById('registerMenuBtn').addEventListener('click', () => {
        showRegister();
      });
    } else {
      // ถ้าล็อกอินแล้ว
      navMenu.innerHTML = `
        <a href="#home">หน้าแรก</a>
        <a href="#products">สินค้า</a>
        <a href="#" id="orderMenuBtn">คำสั่งซื้อ</a>
        <a href="#contact">รับไอดี</a>
        ${user.username === ADMIN_USERNAME ? '<a href="#adminSection">แอดมิน</a>' : ''}
        <a href="#" id="logoutBtn">ออกจากระบบ</a>
      `;

      if(user.username !== ADMIN_USERNAME) {
        document.getElementById('contact').style.display = 'block';
      }

      document.getElementById('logoutBtn').addEventListener('click', logout);
      document.getElementById('orderMenuBtn').addEventListener('click', () => {
        ordersSection.style.display = 'block';
        orderSection.style.display = 'none';
        ordersList.scrollIntoView({behavior:'smooth'});
        renderOrders();
      });
    }
  }

  // แสดงฟอร์มเข้าสู่ระบบ
  function showLogin() {
    authSection.style.display = 'block';
    mainContent.style.display = 'none';
    loginForm.style.display = 'block';
    registerForm.style.display = 'none';
    showRegisterBtn.style.display = 'inline';
    showLoginBtn.style.display = 'none';
    authTitle.textContent = 'เข้าสู่ระบบ';
    messageBox.textContent = '';
  }

  // แสดงฟอร์มสมัครสมาชิก
  function showRegister() {
    authSection.style.display = 'block';
    mainContent.style.display = 'none';
    loginForm.style.display = 'none';
    registerForm.style.display = 'block';
    showRegisterBtn.style.display = 'none';
    showLoginBtn.style.display = 'inline';
    authTitle.textContent = 'สมัครสมาชิก';
    messageBox.textContent = '';
  }

  // ฟังก์ชัน logout
  function logout() {
    localStorage.removeItem('loggedInUser');
    authSection.style.display = 'block';
    mainContent.style.display = 'none';
    showLogin();
    renderNavMenu();
  }

  // ตรวจสอบว่าชื่อซ้ำไหม
  function isUsernameTaken(username) {
    let users = JSON.parse(localStorage.getItem('users')) || [];
    return users.some(u => u.username.toLowerCase() === username.toLowerCase());
  }

  // สมัครสมาชิก
  registerForm.addEventListener('submit', e => {
    e.preventDefault();

    const username = document.getElementById('regUsername').value.trim();
    const password = document.getElementById('regPassword').value;
    const passwordConfirm = document.getElementById('regPasswordConfirm').value;

    if(password !== passwordConfirm) {
      messageBox.textContent = 'รหัสผ่านไม่ตรงกัน';
      return;
    }

    if(isUsernameTaken(username)) {
      messageBox.textContent = 'ชื่อผู้ใช้นี้ถูกใช้ไปแล้ว';
      return;
    }

    // บันทึกผู้ใช้ใหม่
    let users = JSON.parse(localStorage.getItem('users')) || [];
    users.push({username: username, password: password});
    localStorage.setItem('users', JSON.stringify(users));

    messageBox.style.color = 'lightgreen';
    messageBox.textContent = 'สมัครสมาชิกสำเร็จ! กรุณาเข้าสู่ระบบ';
    registerForm.reset();

    setTimeout(() => {
      messageBox.style.color = '#ff3b3b';
      showLogin();
    }, 1500);
  });

  // เข้าสู่ระบบ
  loginForm.addEventListener('submit', e => {
    e.preventDefault();

    const username = document.getElementById('loginUsername').value.trim();
    const password = document.getElementById('loginPassword').value;

    // เช็ค admin
    if(username === ADMIN_USERNAME && password === ADMIN_PASSWORD) {
      localStorage.setItem('loggedInUser', JSON.stringify({username: ADMIN_USERNAME, isAdmin: true}));
      loadMainPage();
      return;
    }

    // เช็ค user ปกติ
    let users = JSON.parse(localStorage.getItem('users')) || [];
    const user = users.find(u => u.username.toLowerCase() === username.toLowerCase() && u.password === password);

    if(user) {
      localStorage.setItem('loggedInUser', JSON.stringify({username: user.username, isAdmin: false}));
      loadMainPage();
    } else {
      messageBox.textContent = 'ชื่อผู้ใช้หรือรหัสผ่านไม่ถูกต้อง';
    }
  });

  // โหลดหน้าหลักเมื่อ login สำเร็จ
  function loadMainPage() {
    authSection.style.display = 'none';
    mainContent.style.display = 'block';
    messageBox.textContent = '';
    renderNavMenu();

    const user = getLoggedInUser();
    nameInput.value = user.username;

    adminSection.style.display = user.isAdmin ? 'block' : 'none';

    ordersSection.style.display = 'none';
    orderSection.style.display = 'none';
  }

  // กดปุ่มสั่งซื้อ
  orderBtn.addEventListener('click', () => {
    ordersSection.style.display = 'none';
    orderSection.style.display = 'block';
    orderSection.scrollIntoView({behavior:'smooth'});
  });

  // ส่งฟอร์มคำสั่งซื้อ
  orderForm.addEventListener('submit', e => {
    e.preventDefault();

    const user = getLoggedInUser();
    if(!user) {
      alert('กรุณาเข้าสู่ระบบก่อนสั่งซื้อ');
      return;
    }

    const orderData = {
      username: user.username,
      gameID: orderForm.gameID.value.trim(),
      quantity: orderForm.quantity.value,
      contact: orderForm.contact.value.trim(),
      timestamp: new Date().toLocaleString()
    };

    let orders = JSON.parse(localStorage.getItem('orders')) || [];
    orders.push(orderData);
    localStorage.setItem('orders', JSON.stringify(orders));

    alert('บันทึกคำสั่งซื้อแล้วส่งให้แอดมิน');

    orderForm.reset();
    orderSection.style.display = 'none';
    ordersSection.style.display = 'block';
    renderOrders();
  });

  // แสดงคำสั่งซื้อของผู้ใช้
  function renderOrders() {
    const user = getLoggedInUser();
    if(!user) return;

    let orders = JSON.parse(localStorage.getItem('orders')) || [];
    const userOrders = orders.filter(o => o.username === user.username);

    if(userOrders.length === 0) {
      ordersList.textContent = 'ยังไม่มีคำสั่งซื้อ';
      return;
    }

    ordersList.innerHTML = '';
    userOrders.forEach((order, index) => {
      const div = document.createElement('div');
      div.style.borderBottom = '1px solid #ff3b3b';
      div.style.padding = '10px 0';
      div.innerHTML = `
        <strong>คำสั่งซื้อ #${index + 1}</strong><br>
        ไอดีเกม: ${order.gameID}<br>
        จำนวน: ${order.quantity}<br>
        ช่องทางติดต่อ: ${order.contact}<br>
        วันที่: ${order.timestamp}
      `;
      ordersList.appendChild(div);
    });
  }

  // ปุ่มอัพเดตจำนวนผู้ใช้ (เฉพาะ admin)
  updateUserCountBtn.addEventListener('click', () => {
    let count = parseInt(userCountInput.value);
    if(isNaN(count) || count < 0) {
      userCountMsg.textContent = 'กรุณากรอกจำนวนที่ถูกต้อง';
      return;
    }
    userCountMsg.textContent = `อัพเดตจำนวนผู้ใช้เป็น ${count} สำเร็จ`;
    // เพิ่มฟังก์ชันจัดการข้อมูลผู้ใช้ได้ที่นี่ ถ้าต้องการ
  });

  // แสดงรูปภาพที่อัพโหลด (แอดมินเท่านั้น)
  uploadImageInput.addEventListener('change', (e) => {
    const files = e.target.files;
    if(files.length === 0) {
      uploadedImagePreview.innerHTML = '';
      return;
    }
    const file = files[0];
    if(!file.type.startsWith('image/')) {
      alert('กรุณาเลือกไฟล์รูปภาพเท่านั้น');
      uploadImageInput.value = '';
      return;
    }
    const reader = new FileReader();
    reader.onload = function(ev) {
      uploadedImagePreview.innerHTML = `<img src="${ev.target.result}" alt="Uploaded Image">`;
    };
    reader.readAsDataURL(file);
  });

  // เช็คล็อกอินตอนโหลดเพจ
  window.onload = () => {
    const user = getLoggedInUser();
    if(user) {
      loadMainPage();
    } else {
      showLogin();
    }
  };

  // ปุ่มเปลี่ยนฟอร์มเข้าสู่ระบบ/สมัครสมาชิก
  showRegisterBtn.addEventListener('click', showRegister);
  showLoginBtn.addEventListener('click', showLogin);

</script>

</body>
</html>
